<ion-app class="content">
  <ion-header class="ion-no-border" color="primary">
    <ion-toolbar class="border-radius-bottom" color="primary">
      <ion-toolbar>
        <ion-buttons>
          <ion-back-button defaultHref="ListePatient"> </ion-back-button>
        </ion-buttons>
      </ion-toolbar>

      <ion-avatar slot="end" class="ion-margin avatar">
        <img src="assets/fatma.jpg" />
      </ion-avatar>
    </ion-toolbar>
    <ion-searchbar
      *ngIf="ConsultationMedService.consultation.length !== 0"
      class="searchBar ion-padding"
      placeholder="cherchez un patient"
      [(ngModel)]="texte"
    ></ion-searchbar>
  </ion-header>

  <ion-content>
    <ion-card *ngFor="let item of consultation">
      <img class="image" src="assets/6.jpg" />
      <ion-item lines="none">
        <!-- <ion-col class="ion-margin"> -->
        <ion-buttons slot="end">
          <ion-button color="primary" (click)="editConsultation()"
            ><ion-icon name="pencil"></ion-icon>
          </ion-button>
          <ion-button color="primary" (click)="suppConsultation(item.id)"
            ><ion-icon name="trash"></ion-icon>
          </ion-button> </ion-buttons
      ></ion-item>

      <ion-card-header>
        <h4>Patient,</h4>

        <ion-card-title>{{ item.patient.username }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div>
          <ion-text color="primary">CIN :</ion-text>
          {{ item.patient.cin }}
        </div>
        <div>
          <ion-text color="primary">Antécèdant :</ion-text>
          {{ item.patient.antecedant }}
        </div>
        <div>
          <ion-text color="primary">Date de Naissance :</ion-text>
          {{ item.patient.dateNaiss }}
        </div>
        <!-- <div class="droite">
          <ion-text color="primary">oeil droite :</ion-text>
          {{ item.AImodelD }}
        </div>
        <div class="gauche">
          <ion-text color="primary">oeil gauche :</ion-text>
          {{ item.AImodelG }}
        </div> -->
        <br />
        <ion-col>
          <div class="date">
            <ion-icon name="calendar-outline" class="calendar"> </ion-icon>
            {{ item.dateConsult }}
          </div>
        </ion-col>
        <ion-col class="flex-bloc">
          <div *ngIf="item.avisExpert">
            <ion-icon name="ellipse-sharp" color="success"></ion-icon>
          </div>
          <div *ngIf="item.avisExpert === false">
            <ion-icon name="ellipse-sharp" color="Medium"></ion-icon>
          </div>

          <div class="details" *ngIf="item.autoDetection?.id === null">
            <ion-button
              fill="outline"
              shape="round"
              [routerLink]="[
                '/DetailsWithoutAutoConsult',
                item?.id,
                item.patient?.cin
              ]"
              >Details</ion-button
            >
          </div>
          <div class="details" *ngIf="item?.autoDetection?.id !== null">
            <ion-button
              fill="outline"
              shape="round"
              [routerLink]="[
                '/detailConsultation',
                item?.id,
                item.patient?.cin,
                item.autoDetection?.id
              ]"
              >Details</ion-button
            >
          </div>
        </ion-col>
      </ion-card-content>

      <app-stars-rating
        (shareRatingValue)="showRating($event)"
      ></app-stars-rating>
      <br />

      <h4 *ngIf="currentRatingValue">
        <!-- The value selected from the stars component is
      <h2>{{ currentRatingValue }}</h2> -->
      </h4>
    </ion-card>
  </ion-content>

  <ion-footer>
    <ion-fab-button color="primary" (click)="newConsultation()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-footer>
</ion-app>
